<!DOCTYPE html>
<html>
  <head>
    <script src="./bower_components/react/react.js"></script>
    <script src="./bower_components/react/JSXTransformer.js"></script>
    <script src="./bower_components/jquery/dist/jquery.min.js"></script>
    <script src="./bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="./bower_components/react-bootstrap/react-bootstrap.min.js"></script>
    <script src="./bower_components/d3/d3.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/sockjs/0.3.4/sockjs.min.js"></script>
    <script src="./bower_components/vertx/vertxbus.js"></script>
    <link href="./bower_components/bootstrap-theme-cosmo/cosmo.min.css" rel="stylesheet">
    <link href="./bower_components/patient.css" rel="stylesheet">

    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <nav class="navbar navbar-default">
      <div class="container-fluid">

        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="./overview.html">S-PI</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <li class="active"><a href="./overview.html">Overview <span class="sr-only">(current)</span></a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Patients <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  <li><a href="./patient.html">Mr. Seagull</a></li>
                  <li><a href="./patient.html">Mrs. Hawk</a></li>
                  <li><a href="./patient.html">Mr. Birdy</a></li>
                  <li><a href="./patient.html">Mr. Legoman</a></li>
                </ul>
              </li>
          </ul>

          <!-- right side of navbar -->
          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Options <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#">Filters</a></li>
                <li><a href="#">High Contrast View</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li><a href="#">Separated link</a></li>
              </ul>
            </li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>


    <div id='mainContainer'class="container-fluid" >
      <div id='graphArea' class='col-md-7 graphBox'>
        <div class="jumbotron graphJumbotron">
          <div class="panel panel-default graph-panel">
            <div class="panel-body">
              <div class="pull-left">
                TOP GRAPH
              </div>
              <div class="pull-right">
                <div class="well well-lg number-well">
                  <span class='number-well-text col-md-offset-3'>00</span>
                </div>
              </div>
            </div>
          </div>

          <div class="panel panel-default graph-panel">
            <div class="panel-body">
              <div class="pull-left">
                SECOND GRAPH
              </div>
              <div class="pull-right">
                <div class="well well-lg number-well">
                  <span class='number-well-text col-md-offset-3'>00</span>
                </div>
              </div>
            </div>
          </div>

          <div class="panel panel-default graph-panel">
            <div class="panel-body">
              <div class="pull-left">
                THIRD GRAPH
              </div>
              <div class="pull-right">
                <div class="well well-lg number-well">
                  <span class='number-well-text col-md-offset-3'>00</span>
                </div>
              </div>
            </div>
          </div>

          <div class="panel panel-default graph-panel">
            <div class="panel-body">
              <div class="pull-left">
                BOTTOM GRAPH
              </div>
              <div class="pull-right">
                <div class="well well-lg number-well">
                  <span class='number-well-text col-md-offset-3'>00</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id='infoArea' class='col-md-4 infoBox'>
        <div class="jumbotron graphJumbotron">

          <div class="panel info-panel panel-success">
            <div class="panel-heading">
              <h3 class="panel-title">All Fine Panel</h3>
            </div>
            <div class="panel-body">
              <div class="col-sm-6 col-md-4 ">
                <a href="#" class="thumbnail">
                  <img src="patient_icon.jpg" alt="Patient Image Here">
                </a>
              </div>
              <div class="col-sm-6 col-md-8 ">
                <h2>Lego Man</h2>
                <table class="table table-bordered">
                  <tbody>
                    <tr>
                      <td>Age</td>
                      <td>34</td>
                    </tr>
                      <td>Bed</td>
                      <td>104a</td>
                    </tr>
                    </tr>
                      <td>Status</td>
                      <td>Critical</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="panel info-panel panel-danger">
            <div class="panel-heading">
              <h3 class="panel-title">Danger Panel</h3>
            </div>
            <div class="panel-body">
              <ul class="list-group">
                <a href="#" class="list-group-item" data-toggle="modal" data-target="#dataModal">Clinical Data</a>
                <a href="#" class="list-group-item" data-toggle="modal" data-target="#labsModal">Lab Data</a>
                <a href="#" class="list-group-item" data-toggle="modal" data-target="#medsModal">Medications</a>
                <a href="#" class="list-group-item" data-toggle="modal" data-target="#progressModal">Progress Notes</a>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modals HTML -->
    <div id="dataModal" class="modal fade">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Clinical data for Lego Man</h4>
          </div>
          <div class="modal-body">
            <table class="table table-condensed">
              <tr>
                <th scope="row">Subject ID</th>
                <td>6235-59-23</td>
              </tr>
              <tr>
                <th scope="row">Hospital Admission ID</th>
                <td>293994</td>
              </tr>
              <tr>
                <th scope="row">Case ID</th>
                <td>9923</td>
              </tr>
              <tr>
                <th scope="row">Height</th>
                <td>120 cm</td>
              </tr>
              <tr>
                <th scope="row">Weight</th>
                <td>40 kg</td>
              </tr>
              <tr class="warning">
                <th scope="row">Known allergies</th>
                <td>Penicillin</td>
              </tr>
              <tr>
                <th scope="row">History of cardiac problem</th>
                <td>No</th>
              </tr>
              <tr class="warning">
                <th scope="row">Blood Pressure</th>
                <td>130/90</th>
              </tr>
            </table>
            <h5>Other notes</h5>
            <p>
            - 2015-05-29 Dr. Vance:
            Upon arrival to ICU, Lego Man's heartrate spiked due to anxiety. Recommend Xanax for future incidents.
            </p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <div id="labsModal" class="modal fade">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">Labs</h4>
          </div>
          <div class="modal-body">
            <h5>2015-05-29</h5>
            <p>
            Basic blood tests performed. No abnormalities.
            </p>
            <h5>2015-05-29</h5>
            <p>
            Reflex tests performed. No abnormalities.
            </p>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <div id="medsModal" class="modal fade">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">Current medication records for Lego Man</h4>
          </div>
          <div class="modal-body">
            <table class="table table-condensed">
              <tr>
                <th>Name</th>
                <th>Dose</th>
                <th>Last administered</th>
              </tr>
              <tr>
                <td>Zantac</td>
                <td>120 mg</td>
                <td>Approximately 3:30 pm, prior to Mr. Man's admission to the ICU</td>
              </tr>
              <tr> 
                <td>Morphine</td>
                <td>1U</td>
                <td>6:00 pm upon admission to ICU due to extreme leg pain</td>
              </tr>
            </table>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <div id="progressModal" class="modal fade">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">Progress Notes</h4>
          </div>
          <div class="modal-body">
            <h5>2015-05-29</h5>
            <p>
            Patient admitted with severe leg pain.
            </p>
            <h5>2015-05-30</h5>
            <p>
            Leg pain continues unabated, blood pressure high.
            </p>
            <h5>2015-06-01</h5>
            <p>
            Minor improvement in pain, still high blood pressure.
            </p>
            <h5>2015-06-02</h5>
            <p>
            Leg pain reappeared. Swelling in knee.
            </p>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>

  <script>
    var eb = new vertx.EventBus("http://s-pi-demo.com/api/streambus");
    var channel = [];

    var data = [];
    var data2 = [];
    var data3 = [];
    var data4 = [];

    eb.onopen = function() {
        $.when($.ajax("http://s-pi-demo.com/api/stream/numerical/hr/1"),
        $.ajax("http://s-pi-demo.com/api/stream/numerical/hr/2"),
        $.ajax("http://s-pi-demo.com/api/stream/numerical/hr/3"),
        $.ajax("http://s-pi-demo.com/api/stream/numerical/hr/4")).done(
        function(dat1, dat2, dat3, dat4) {
            eb.registerHandler(dat1[0], function(msg) {
                var dmsg = JSON.parse(msg);
                //data.append(new Date(dmsg.x * 1000), dmsg.y);
                console.log("getting msg x: " + dmsg.x +" y: " + dmsg.y);
            });
            eb.registerHandler(dat2[0], function(msg) {
                var dmsg = JSON.parse(msg);
                //data2.append(new Date(dmsg.x * 1000), dmsg.y);
                console.log("getting msg x: " + dmsg.x +" y: " + dmsg.y);
            });
            eb.registerHandler(dat3[0], function(msg) {
                var dmsg = JSON.parse(msg);
                //data3.append(new Date(dmsg.x * 1000), dmsg.y);
                console.log("getting msg x: " + dmsg.x +" y: " + dmsg.y);
            });
            eb.registerHandler(dat4[0], function(msg) {
                var dmsg = JSON.parse(msg);
                //data4.append(new Date(dmsg.x * 1000), dmsg.y);
                console.log("getting msg x: " + dmsg.x +" y: " + dmsg.y);
            });
            //channel.push(dat1[0], dat2[0], dat3[0], dat4[0]);
        }
    );
        };
    </script>

